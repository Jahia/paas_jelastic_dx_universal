---
type: update
version: 0.1
name: Jahia - set root password
id: jahia-set-root-password
description:
  short: Jahia - set new root password

globals:
  new_password: ${settings.rootpwd}

onInstall:
  - api [cp,proc]: env.control.AddContainerEnvVars
    vars: {"SUPER_USER_PASSWORD": "${globals.new_password}"}

  - cmd [proc]: |-
        echo $SUPER_USER_PASSWORD > $DATA_PATH/digital-factory-data/root.pwd
        chown tomcat:tomcat $DATA_PATH/digital-factory-data/root.pwd

settings:
  fields:
    - name: rootpwd
      type: string
      caption: New Jahia root password
      vtype: string
      required: true
